#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
YOLOv8ä¼˜åŒ–ç¤ºä¾‹é¡¹ç›® - ä¸»è¿è¡Œè„šæœ¬
================================

æœ¬è„šæœ¬æ˜¯YOLOv8ä¼˜åŒ–ç¤ºä¾‹é¡¹ç›®çš„æ ¸å¿ƒæ‰§è¡Œå…¥å£ï¼Œæä¾›ç»Ÿä¸€çš„å‘½ä»¤è¡Œæ¥å£æ¥è¿è¡Œå„ç§ä¼˜åŒ–æ–¹æ³•å’Œå®éªŒã€‚

ğŸ¯ ä¸»è¦åŠŸèƒ½ï¼š
==========
1. ä¼˜åŒ–æ–¹æ³•æ‰§è¡Œ
   - DCN (å¯å˜å½¢å·ç§¯ç½‘ç»œ) - å‡ ä½•å»ºæ¨¡ä¼˜åŒ–
   - SCC (ç©ºé—´-é€šé“äº¤å‰æ³¨æ„åŠ›) - ç‰¹å¾å¢å¼ºä¼˜åŒ–
   - DCN+SCCç»„åˆä¼˜åŒ– - åŒé‡ä¼˜åŒ–ç­–ç•¥

2. å®éªŒç®¡ç†
   - æ¶ˆèå®éªŒ (Ablation Study) - ç§‘å­¦å¯¹æ¯”åˆ†æ
   - æ¨¡å—æµ‹è¯• - åŠŸèƒ½å®Œæ•´æ€§éªŒè¯
   - æ‰¹é‡æ‰§è¡Œ - è‡ªåŠ¨åŒ–è¿è¡Œæµç¨‹

3. ç³»ç»Ÿé›†æˆ
   - å‘½ä»¤è¡Œå‚æ•°è§£æ
   - é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
   - ç»“æœæ±‡æ€»å’ŒçŠ¶æ€æŠ¥å‘Š

ğŸš€ ä½¿ç”¨æ–¹æ³•ï¼š
==========
åŸºæœ¬ç”¨æ³•ï¼š
    python run_all_examples.py --method dcn         # è¿è¡ŒDCNä¼˜åŒ–ç¤ºä¾‹
    python run_all_examples.py --method scc         # è¿è¡ŒSCCæ³¨æ„åŠ›ç¤ºä¾‹
    python run_all_examples.py --method dcn_scc     # è¿è¡ŒDCN+SCCç»„åˆç¤ºä¾‹
    python run_all_examples.py --method all         # è¿è¡Œæ‰€æœ‰ä¼˜åŒ–æ–¹æ³•

é«˜çº§åŠŸèƒ½ï¼š
    python run_all_examples.py --ablation           # æ‰§è¡Œæ¶ˆèå®éªŒå¯¹æ¯”
    python run_all_examples.py --test               # æµ‹è¯•æ‰€æœ‰æ¨¡å—åŠŸèƒ½
    python run_all_examples.py --help               # æ˜¾ç¤ºè¯¦ç»†å¸®åŠ©ä¿¡æ¯

ğŸ“‹ å‘½ä»¤è¡Œå‚æ•°ï¼š
============
--method {dcn,scc,dcn_scc,all} : æŒ‡å®šè¦è¿è¡Œçš„ä¼˜åŒ–æ–¹æ³•
--ablation                    : æ‰§è¡Œæ¶ˆèå®éªŒï¼Œæ¯”è¾ƒæ‰€æœ‰æ–¹æ³•çš„æ€§èƒ½
--test                        : æµ‹è¯•æ‰€æœ‰æ¨¡å—çš„å¯¼å…¥å’ŒåŸºæœ¬åŠŸèƒ½
--help                        : æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯

ğŸ”§ æŠ€æœ¯å®ç°ï¼š
==========
- åŸºäºargparseçš„å‚æ•°è§£æ
- æ¨¡å—åŒ–å‡½æ•°è®¾è®¡
- å®Œå–„çš„å¼‚å¸¸å¤„ç†
- å½©è‰²ç»ˆç«¯è¾“å‡º
- è‡ªåŠ¨è·¯å¾„é…ç½®

ğŸ“Š è¾“å‡ºç»“æœï¼š
==========
- å®æ—¶æ‰§è¡ŒçŠ¶æ€æ˜¾ç¤º
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œè§£å†³å»ºè®®
- ç»“æœæ–‡ä»¶è·¯å¾„æç¤º
- æ‰§è¡Œç»Ÿè®¡å’Œæ€§èƒ½æŠ¥å‘Š
"""

import argparse
import sys
import os
from pathlib import Path

# ç¯å¢ƒé…ç½®ï¼šå°†å½“å‰ç›®å½•æ·»åŠ åˆ°Pythonè·¯å¾„
current_dir = Path(__file__).parent
sys.path.insert(0, str(current_dir))

def run_dcn_example():
    """
    æ‰§è¡ŒDCNä¼˜åŒ–ç¤ºä¾‹

    è¿è¡Œå®Œæ•´çš„DCNï¼ˆå¯å˜å½¢å·ç§¯ç½‘ç»œï¼‰ä¼˜åŒ–è®­ç»ƒæµç¨‹ï¼Œ
    æ¼”ç¤ºå¦‚ä½•é€šè¿‡DCNæå‡YOLOv8çš„å‡ ä½•å»ºæ¨¡èƒ½åŠ›ã€‚

    æ‰§è¡Œå†…å®¹ï¼š
    =========
    - åŠ è½½YOLOv8åŸºç¡€æ¨¡å‹
    - åº”ç”¨DCNä¼˜åŒ–åˆ°æŒ‡å®šå±‚
    - æ‰§è¡Œå®Œæ•´è®­ç»ƒæµç¨‹
    - ç”Ÿæˆæ€§èƒ½è¯„ä¼°æŠ¥å‘Š
    - ä¿å­˜è®­ç»ƒç»“æœå’Œæ¨¡å‹æƒé‡

    æŠ€æœ¯ç‰¹ç‚¹ï¼š
    =========
    - ä¸“æ³¨äºå‡ ä½•å˜æ¢å»ºæ¨¡
    - å¢å¼ºå¯¹å˜å½¢ç‰©ä½“çš„æ£€æµ‹
    - ä¿æŒè®¡ç®—æ•ˆç‡çš„å¹³è¡¡
    - è¯¦ç»†çš„è®­ç»ƒè¿‡ç¨‹è®°å½•

    è¾“å‡ºç»“æœï¼š
    =========
    - results_dcn/ ç›®å½•ä¸‹çš„è®­ç»ƒç»“æœ
    - ä¼˜åŒ–åçš„æ¨¡å‹æƒé‡æ–‡ä»¶
    - è®­ç»ƒæ—¥å¿—å’Œæ€§èƒ½æ›²çº¿
    - éªŒè¯é›†è¯„ä¼°æŒ‡æ ‡

    é€‚ç”¨åœºæ™¯ï¼š
    =========
    - å¤„ç†å¯å˜å½¢ç‰©ä½“æ£€æµ‹ä»»åŠ¡
    - éœ€è¦ç²¾ç¡®å‡ ä½•å»ºæ¨¡çš„åº”ç”¨
    - å¯¹æ£€æµ‹è¾¹ç•Œç²¾åº¦è¦æ±‚è¾ƒé«˜çš„åœºæ™¯

    è¿”å›å€¼ï¼š
    =======
    bool: æ‰§è¡Œæ˜¯å¦æˆåŠŸ
        - True: ç¤ºä¾‹æ‰§è¡ŒæˆåŠŸ
        - False: æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯
    """
    print("ğŸš€ æ‰§è¡ŒDCNä¼˜åŒ–ç¤ºä¾‹")
    print("=" * 50)
    print("ğŸ¯ ç›®æ ‡ï¼šæ¼”ç¤ºDCNå¯å˜å½¢å·ç§¯ç½‘ç»œçš„ä¼˜åŒ–æ•ˆæœ")
    print("ğŸ”§ é‡ç‚¹ï¼šå‡ ä½•å»ºæ¨¡èƒ½åŠ›çš„æå‡")

    try:
        # å¯¼å…¥å¹¶æ‰§è¡ŒDCNè®­ç»ƒä¸»å‡½æ•°
        from dcn.train_dcn import main as dcn_main
        print("ğŸ“š æ­£åœ¨æ‰§è¡ŒDCNè®­ç»ƒæµç¨‹...")
        dcn_main()

        print("âœ… DCNç¤ºä¾‹æ‰§è¡ŒæˆåŠŸå®Œæˆ")
        print("ğŸ“ ç»“æœå·²ä¿å­˜åˆ° results_dcn/ ç›®å½•")
        return True

    except ImportError as e:
        print(f"âŒ DCNæ¨¡å—å¯¼å…¥å¤±è´¥: {e}")
        print("ğŸ’¡ å»ºè®®ï¼šæ£€æŸ¥dcnæ¨¡å—æ˜¯å¦æ­£ç¡®å®‰è£…")
        return False

    except Exception as e:
        print(f"âŒ DCNç¤ºä¾‹æ‰§è¡Œå¤±è´¥: {e}")
        print("ğŸ” å¯èƒ½åŸå› ï¼š")
        print("   â€¢ GPUå†…å­˜ä¸è¶³")
        print("   â€¢ æ•°æ®é›†è·¯å¾„é”™è¯¯")
        print("   â€¢ ä¾èµ–åº“ç‰ˆæœ¬ä¸å…¼å®¹")
        return False

def run_scc_example():
    """
    æ‰§è¡ŒSCCæ³¨æ„åŠ›ä¼˜åŒ–ç¤ºä¾‹

    è¿è¡Œå®Œæ•´çš„SCCï¼ˆç©ºé—´-é€šé“äº¤å‰æ³¨æ„åŠ›ï¼‰ä¼˜åŒ–è®­ç»ƒæµç¨‹ï¼Œ
    æ¼”ç¤ºå¦‚ä½•é€šè¿‡æ³¨æ„åŠ›æœºåˆ¶æå‡YOLOv8çš„ç‰¹å¾è¡¨è¾¾è´¨é‡ã€‚

    æ‰§è¡Œå†…å®¹ï¼š
    =========
    - åŠ è½½YOLOv8åŸºç¡€æ¨¡å‹
    - é›†æˆSCCæ³¨æ„åŠ›æ¨¡å—
    - æ‰§è¡Œæ³¨æ„åŠ›å¢å¼ºè®­ç»ƒ
    - è¯„ä¼°ç‰¹å¾è´¨é‡æå‡æ•ˆæœ
    - ä¿å­˜ä¼˜åŒ–åçš„æ¨¡å‹å’Œç»“æœ

    æŠ€æœ¯ç‰¹ç‚¹ï¼š
    =========
    - åŸºäºCBAMæ¶æ„çš„æ³¨æ„åŠ›æœºåˆ¶
    - è½»é‡çº§ç‰¹å¾å¢å¼ºè®¾è®¡
    - é€šé“å’Œç©ºé—´çš„åŒé‡æ³¨æ„åŠ›
    - å³æ’å³ç”¨çš„æ¨¡å—åŒ–å®ç°

    è¾“å‡ºç»“æœï¼š
    =========
    - results_scc/ ç›®å½•ä¸‹çš„è®­ç»ƒç»“æœ
    - æ³¨æ„åŠ›å¢å¼ºçš„æ¨¡å‹æƒé‡
    - ç‰¹å¾è´¨é‡è¯„ä¼°æŠ¥å‘Š
    - æ³¨æ„åŠ›æƒé‡å¯è§†åŒ–ï¼ˆå¯é€‰ï¼‰

    é€‚ç”¨åœºæ™¯ï¼š
    =========
    - éœ€è¦æå‡ç‰¹å¾è¡¨è¾¾è´¨é‡çš„ä»»åŠ¡
    - å¯¹æ¨¡å‹æ¨ç†é€Ÿåº¦æ•æ„Ÿçš„åº”ç”¨
    - è½»é‡çº§ä¼˜åŒ–çš„éœ€æ±‚åœºæ™¯

    è¿”å›å€¼ï¼š
    =======
    bool: æ‰§è¡Œæ˜¯å¦æˆåŠŸ
    """
    print("ğŸš€ æ‰§è¡ŒSCCæ³¨æ„åŠ›ä¼˜åŒ–ç¤ºä¾‹")
    print("=" * 50)
    print("ğŸ§  ç›®æ ‡ï¼šæ¼”ç¤ºSCCç©ºé—´-é€šé“äº¤å‰æ³¨æ„åŠ›çš„ä¼˜åŒ–æ•ˆæœ")
    print("ğŸ¯ é‡ç‚¹ï¼šæ³¨æ„åŠ›æœºåˆ¶çš„ç‰¹å¾å¢å¼º")

    try:
        from scc.train_scc import main as scc_main
        print("ğŸ“š æ­£åœ¨æ‰§è¡ŒSCCæ³¨æ„åŠ›è®­ç»ƒæµç¨‹...")
        scc_main()

        print("âœ… SCCç¤ºä¾‹æ‰§è¡ŒæˆåŠŸå®Œæˆ")
        print("ğŸ“ ç»“æœå·²ä¿å­˜åˆ° results_scc/ ç›®å½•")
        return True

    except ImportError as e:
        print(f"âŒ SCCæ¨¡å—å¯¼å…¥å¤±è´¥: {e}")
        print("ğŸ’¡ å»ºè®®ï¼šæ£€æŸ¥sccæ¨¡å—æ˜¯å¦æ­£ç¡®å®‰è£…")
        return False

    except Exception as e:
        print(f"âŒ SCCç¤ºä¾‹æ‰§è¡Œå¤±è´¥: {e}")
        print("ğŸ” å¯èƒ½åŸå› ï¼š")
        print("   â€¢ æ³¨æ„åŠ›æ¨¡å—é…ç½®é”™è¯¯")
        print("   â€¢ å†…å­˜èµ„æºä¸è¶³")
        print("   â€¢ æ•°æ®é›†åŠ è½½é—®é¢˜")
        return False


def run_dcn_scc_example():
    """
    æ‰§è¡ŒDCN+SCCç»„åˆä¼˜åŒ–ç¤ºä¾‹

    è¿è¡Œå®Œæ•´çš„DCN+SCCç»„åˆä¼˜åŒ–è®­ç»ƒæµç¨‹ï¼Œ
    æ¼”ç¤ºå‡ ä½•å»ºæ¨¡å’Œæ³¨æ„åŠ›å¢å¼ºçš„åŒé‡ä¼˜åŒ–ç­–ç•¥ã€‚

    æ‰§è¡Œå†…å®¹ï¼š
    =========
    - åŠ è½½YOLOv8åŸºç¡€æ¨¡å‹
    - åŒæ—¶é›†æˆDCNå’ŒSCCä¼˜åŒ–
    - æ‰§è¡ŒååŒä¼˜åŒ–è®­ç»ƒ
    - éªŒè¯åŒé‡ä¼˜åŒ–æ•ˆæœ
    - ä¿å­˜æœ€ä¼˜æ€§èƒ½çš„æ¨¡å‹

    æŠ€æœ¯ç‰¹ç‚¹ï¼š
    =========
    - DCNå‡ ä½•å»ºæ¨¡ + SCCæ³¨æ„åŠ›å¢å¼º
    - åŒé‡ä¼˜åŒ–çš„ååŒæ•ˆåº”
    - å¹³è¡¡æ€§èƒ½å’Œæ•ˆç‡çš„è®¾è®¡
    - å…¨é¢çš„ç‰¹å¾å¤„ç†èƒ½åŠ›

    è¾“å‡ºç»“æœï¼š
    =========
    - results_dcn_scc_combined/ ç›®å½•ä¸‹çš„è®­ç»ƒç»“æœ
    - åŒé‡ä¼˜åŒ–çš„æ¨¡å‹æƒé‡
    - æ€§èƒ½å¯¹æ¯”åˆ†ææŠ¥å‘Š
    - æ¶ˆèå®éªŒç»“æœï¼ˆå¯é€‰ï¼‰

    é€‚ç”¨åœºæ™¯ï¼š
    =========
    - å¯¹æ£€æµ‹æ€§èƒ½è¦æ±‚æé«˜çš„åº”ç”¨
    - éœ€è¦å…¨é¢ç‰¹å¾ä¼˜åŒ–çš„å¤æ‚ä»»åŠ¡
    - è®¡ç®—èµ„æºç›¸å¯¹å……è¶³çš„ç¯å¢ƒ

    è¿”å›å€¼ï¼š
    =======
    bool: æ‰§è¡Œæ˜¯å¦æˆåŠŸ
    """
    print("ğŸš€ æ‰§è¡ŒDCN+SCCç»„åˆä¼˜åŒ–ç¤ºä¾‹")
    print("=" * 60)
    print("âš¡ ç›®æ ‡ï¼šæ¼”ç¤ºDCNå’ŒSCCç»„åˆä¼˜åŒ–çš„ååŒæ•ˆæœ")
    print("ğŸ¯ é‡ç‚¹ï¼šå‡ ä½•å»ºæ¨¡+æ³¨æ„åŠ›å¢å¼ºçš„åŒé‡ä¼˜åŒ–")

    try:
        from dcn_scc_combined.train_dcn_scc import main as dcn_scc_main
        print("ğŸ“š æ­£åœ¨æ‰§è¡ŒDCN+SCCç»„åˆè®­ç»ƒæµç¨‹...")
        dcn_scc_main()

        print("âœ… DCN+SCCç¤ºä¾‹æ‰§è¡ŒæˆåŠŸå®Œæˆ")
        print("ğŸ“ ç»“æœå·²ä¿å­˜åˆ° results_dcn_scc_combined/ ç›®å½•")
        return True

    except ImportError as e:
        print(f"âŒ DCN+SCCæ¨¡å—å¯¼å…¥å¤±è´¥: {e}")
        print("ğŸ’¡ å»ºè®®ï¼šæ£€æŸ¥dcn_scc_combinedæ¨¡å—æ˜¯å¦æ­£ç¡®å®‰è£…")
        return False

    except Exception as e:
        print(f"âŒ DCN+SCCç¤ºä¾‹æ‰§è¡Œå¤±è´¥: {e}")
        print("ğŸ” å¯èƒ½åŸå› ï¼š")
        print("   â€¢ ç»„åˆä¼˜åŒ–é…ç½®å¤æ‚")
        print("   â€¢ GPUå†…å­˜éœ€æ±‚è¾ƒé«˜")
        print("   â€¢ å¤šæ¨¡å—ååŒé—®é¢˜")
        return False

def run_ablation_study():
    """
    æ‰§è¡Œæ¶ˆèå®éªŒç ”ç©¶

    è¿è¡Œç§‘å­¦çš„æ¶ˆèå®éªŒï¼Œå¯¹æ¯”åˆ†æä¸åŒä¼˜åŒ–æ–¹æ³•çš„æ•ˆæœå’Œè´¡çŒ®ã€‚
    é€šè¿‡æ§åˆ¶å˜é‡æ³•éªŒè¯å„ä¼˜åŒ–ç»„ä»¶çš„æ€§èƒ½å½±å“ã€‚

    å®éªŒè®¾è®¡ï¼š
    =========
    å¯¹æ¯”å¯¹è±¡ï¼š
    - baseline: åŸå§‹YOLOv8æ¨¡å‹
    - dcn_only: ä»…DCNä¼˜åŒ–çš„æ¨¡å‹
    - scc_only: ä»…SCCä¼˜åŒ–çš„æ¨¡å‹
    - combined: DCN+SCCç»„åˆä¼˜åŒ–çš„æ¨¡å‹

    è¯„ä¼°æŒ‡æ ‡ï¼š
    =========
    - mAP@0.5: ç›®æ ‡æ£€æµ‹ä¸»è¦æŒ‡æ ‡
    - mAP@0.5:0.95: ç»¼åˆæ€§èƒ½è¯„ä¼°
    - å‚æ•°é‡å˜åŒ–: è®¡ç®—å¤æ‚åº¦åˆ†æ
    - æ¨ç†é€Ÿåº¦: å®é™…åº”ç”¨æ•ˆç‡è¯„ä¼°

    å®éªŒæµç¨‹ï¼š
    =========
    1. å‡†å¤‡å››ç§æ¨¡å‹é…ç½®
    2. åœ¨ç›¸åŒæ¡ä»¶ä¸‹è®­ç»ƒæ‰€æœ‰æ¨¡å‹
    3. ç»Ÿä¸€è¯„ä¼°æ ‡å‡†è¿›è¡Œæµ‹è¯•
    4. ç”Ÿæˆå¯¹æ¯”åˆ†ææŠ¥å‘Š

    è¾“å‡ºç»“æœï¼š
    =========
    - ablation_results/ ç›®å½•ä¸‹çš„å®éªŒç»“æœ
    - æ€§èƒ½å¯¹æ¯”è¡¨æ ¼å’Œå›¾è¡¨
    - å„æ–¹æ³•çš„è´¡çŒ®åº¦åˆ†æ
    - ä¼˜åŒ–ç­–ç•¥å»ºè®®æŠ¥å‘Š

    ç§‘å­¦ä»·å€¼ï¼š
    =========
    - éªŒè¯å„ä¼˜åŒ–æ–¹æ³•çš„æœ‰æ•ˆæ€§
    - åˆ†æä¼˜åŒ–ç­–ç•¥çš„è´¡çŒ®åº¦
    - ä¸ºæ–¹æ³•é€‰æ‹©æä¾›æ•°æ®æ”¯æŒ
    - æŒ‡å¯¼æœªæ¥ä¼˜åŒ–æ–¹å‘

    è¿”å›å€¼ï¼š
    =======
    bool: å®éªŒæ˜¯å¦æˆåŠŸå®Œæˆ
    """
    print("ğŸ”¬ æ‰§è¡Œæ¶ˆèå®éªŒç ”ç©¶")
    print("=" * 50)
    print("ğŸ“Š ç›®æ ‡ï¼šç§‘å­¦å¯¹æ¯”åˆ†æä¸åŒä¼˜åŒ–æ–¹æ³•çš„æ€§èƒ½è´¡çŒ®")
    print("ğŸ¯ é‡ç‚¹ï¼šéªŒè¯å„ä¼˜åŒ–ç»„ä»¶çš„æœ‰æ•ˆæ€§å’Œå¿…è¦æ€§")

    try:
        # å¯¼å…¥æ¶ˆèå®éªŒå‡½æ•°
        from dcn_scc_combined.train_dcn_scc import ablation_study

        print("ğŸ§ª æ­£åœ¨æ‰§è¡Œæ¶ˆèå®éªŒ...")
        print("   å¯¹æ¯”æ–¹æ³•ï¼šbaseline vs DCN vs SCC vs DCN+SCC")
        print("   è¯„ä¼°æŒ‡æ ‡ï¼šmAP, å‚æ•°é‡, æ¨ç†é€Ÿåº¦")

        # æ‰§è¡Œæ¶ˆèå®éªŒ
        models = ablation_study()

        if models and len(models) > 0:
            print("âœ… æ¶ˆèå®éªŒå®ŒæˆæˆåŠŸ")
            print("ğŸ“ è¯¦ç»†ç»“æœå·²ä¿å­˜åˆ° ablation_results/ ç›®å½•")
            print("ğŸ“Š å®éªŒåŒ…å«ä»¥ä¸‹å¯¹æ¯”åˆ†æï¼š")
            print("   â€¢ å„æ–¹æ³•çš„mAPæ€§èƒ½å¯¹æ¯”")
            print("   â€¢ å‚æ•°é‡å’Œè®¡ç®—å¤æ‚åº¦åˆ†æ")
            print("   â€¢ æ¨ç†é€Ÿåº¦æ•ˆç‡è¯„ä¼°")
            print("   â€¢ ä¼˜åŒ–ç­–ç•¥è´¡çŒ®åº¦åˆ†æ")
            return True
        else:
            print("âŒ æ¶ˆèå®éªŒæœªèƒ½ç”Ÿæˆæœ‰æ•ˆç»“æœ")
            print("ğŸ’¡ å¯èƒ½åŸå› ï¼šæ¨¡å‹è®­ç»ƒæˆ–è¯„ä¼°è¿‡ç¨‹ä¸­å‡ºç°é—®é¢˜")
            return False

    except ImportError as e:
        print(f"âŒ æ¶ˆèå®éªŒæ¨¡å—å¯¼å…¥å¤±è´¥: {e}")
        print("ğŸ’¡ å»ºè®®ï¼šæ£€æŸ¥dcn_scc_combined.train_dcn_sccæ¨¡å—")
        return False

    except Exception as e:
        print(f"âŒ æ¶ˆèå®éªŒæ‰§è¡Œå¤±è´¥: {e}")
        print("ğŸ” å¯èƒ½åŸå› ï¼š")
        print("   â€¢ å¤šæ¨¡å‹è®­ç»ƒèµ„æºä¸è¶³")
        print("   â€¢ å®éªŒé…ç½®å‚æ•°é”™è¯¯")
        print("   â€¢ ç£ç›˜ç©ºé—´ä¸è¶³ä»¥ä¿å­˜ç»“æœ")
        print("   â€¢ ä¾èµ–åº“ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜")
        return False

def test_all_modules():
    """
    æµ‹è¯•æ‰€æœ‰æ¨¡å—å®ç°çš„åŠŸèƒ½å®Œæ•´æ€§

    å¯¹é¡¹ç›®ä¸­çš„æ‰€æœ‰æ ¸å¿ƒæ¨¡å—è¿›è¡Œå…¨é¢çš„åŠŸèƒ½æµ‹è¯•ï¼Œ
    éªŒè¯æ¨¡å—å¯¼å…¥ã€åˆå§‹åŒ–å’ŒåŸºæœ¬åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚

    æµ‹è¯•èŒƒå›´ï¼š
    =========
    1. DCNæ¨¡å—æµ‹è¯•
       - DCNConv: å¯å˜å½¢å·ç§¯å±‚
       - DCNBottleneck: DCNç“¶é¢ˆå—
       - DCN_C2f: DCNå¢å¼ºC2fæ¨¡å—
       - DCN_C2f_YAML: YAMLé…ç½®ç‰ˆæœ¬

    2. SCCæ¨¡å—æµ‹è¯•
       - ChannelAttention: é€šé“æ³¨æ„åŠ›
       - SpatialAttention: ç©ºé—´æ³¨æ„åŠ›
       - SCC_Attention: ç»„åˆæ³¨æ„åŠ›
       - SCC_C2f: SCCå¢å¼ºC2fæ¨¡å—
       - Enhanced_SCC_C2f: å¢å¼ºç‰ˆSCC

    3. DCN+SCCç»„åˆæ¨¡å—æµ‹è¯•
       - DCN_SCC_Conv: ç»„åˆå·ç§¯å±‚
       - DCN_SCC_Bottleneck: ç»„åˆç“¶é¢ˆå—
       - DCN_SCC_C2f: ç»„åˆC2fæ¨¡å—
       - Enhanced_DCN_SCC_C2f: å¢å¼ºç‰ˆç»„åˆ

    4. å·¥å…·å‡½æ•°æµ‹è¯•
       - setup_device: è®¾å¤‡æ£€æµ‹
       - validate_model: æ¨¡å‹éªŒè¯
       - benchmark_inference: æ€§èƒ½åŸºå‡†

    æµ‹è¯•æ–¹æ³•ï¼š
    =========
    - æ¨¡å—å¯¼å…¥æµ‹è¯•ï¼šéªŒè¯èƒ½å¦æˆåŠŸå¯¼å…¥æ‰€æœ‰æ¨¡å—
    - åˆå§‹åŒ–æµ‹è¯•ï¼šéªŒè¯æ¨¡å—èƒ½å¦æ­£ç¡®åˆå§‹åŒ–
    - åŠŸèƒ½å®Œæ•´æ€§ï¼šéªŒè¯æ ¸å¿ƒåŠŸèƒ½æ˜¯å¦å¯ç”¨

    è¾“å‡ºä¿¡æ¯ï¼š
    =========
    - å„æ¨¡å—çš„æµ‹è¯•çŠ¶æ€ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰
    - è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œè¯Šæ–­å»ºè®®
    - æ€»ä½“æµ‹è¯•ç»Ÿè®¡å’Œé€šè¿‡ç‡

    è¿”å›å€¼ï¼š
    =======
    bool: æ‰€æœ‰æ¨¡å—æ˜¯å¦æµ‹è¯•é€šè¿‡
        - True: æ‰€æœ‰æ¨¡å—æµ‹è¯•æˆåŠŸ
        - False: éƒ¨åˆ†æˆ–å…¨éƒ¨æ¨¡å—æµ‹è¯•å¤±è´¥

    ä½¿ç”¨å»ºè®®ï¼š
    =========
    - åœ¨é¡¹ç›®éƒ¨ç½²å‰è¿è¡Œæ­¤æµ‹è¯•
    - æ¨¡å—æ›´æ–°åé‡æ–°æµ‹è¯•éªŒè¯
    - CI/CDæµç¨‹ä¸­é›†æˆæ­¤æµ‹è¯•
    - æ’æŸ¥ä¾èµ–é—®é¢˜æ—¶çš„è¯Šæ–­å·¥å…·
    """
    print("ğŸ§ª æµ‹è¯•æ‰€æœ‰æ¨¡å—å®ç°çš„åŠŸèƒ½å®Œæ•´æ€§")
    print("=" * 60)
    print("ğŸ” ç›®æ ‡ï¼šéªŒè¯é¡¹ç›®ä¸­æ‰€æœ‰æ ¸å¿ƒæ¨¡å—çš„åŠŸèƒ½æ­£ç¡®æ€§")
    print("ğŸ¯ é‡ç‚¹ï¼šç¡®ä¿æ¨¡å—å¯¼å…¥å’ŒåŸºæœ¬åŠŸèƒ½æ­£å¸¸å·¥ä½œ")

    # åˆå§‹åŒ–æµ‹è¯•ç»Ÿè®¡
    success_count = 0
    total_tests = 0
    test_results = []

    # æµ‹è¯•DCNæ¨¡å—
    print("\nğŸ”§ æµ‹è¯•DCNæ¨¡å— (å¯å˜å½¢å·ç§¯ç½‘ç»œ):")
    total_tests += 1
    try:
        print("   æ­£åœ¨å¯¼å…¥DCNç›¸å…³æ¨¡å—...")
        from dcn.dcn_conv import DCNConv, DCNBottleneck
        from dcn.dcn_c2f import DCN_C2f, DCN_C2f_YAML
        print("   âœ… DCNæ¨¡å—å¯¼å…¥æˆåŠŸ")
        print("   ğŸ“¦ åŒ…å«: DCNConv, DCNBottleneck, DCN_C2f, DCN_C2f_YAML")
        success_count += 1
        test_results.append(("DCNæ¨¡å—", True, "å¯¼å…¥æˆåŠŸ"))

    except ImportError as e:
        print(f"   âŒ DCNæ¨¡å—å¯¼å…¥å¤±è´¥: {e}")
        print("   ğŸ’¡ å»ºè®®ï¼šæ£€æŸ¥dcnå­æ¨¡å—æ˜¯å¦å®Œæ•´")
        test_results.append(("DCNæ¨¡å—", False, str(e)))

    except Exception as e:
        print(f"   âŒ DCNæ¨¡å—æµ‹è¯•å¼‚å¸¸: {e}")
        test_results.append(("DCNæ¨¡å—", False, str(e)))

    # æµ‹è¯•SCCæ¨¡å—
    print("\nğŸ”§ æµ‹è¯•SCCæ¨¡å— (ç©ºé—´-é€šé“äº¤å‰æ³¨æ„åŠ›):")
    total_tests += 1
    try:
        print("   æ­£åœ¨å¯¼å…¥SCCç›¸å…³æ¨¡å—...")
        from scc.scc_attention import ChannelAttention, SpatialAttention, SCC_Attention
        from scc.scc_c2f import SCC_C2f, SCC_C2f_YAML, Enhanced_SCC_C2f
        print("   âœ… SCCæ¨¡å—å¯¼å…¥æˆåŠŸ")
        print("   ğŸ“¦ åŒ…å«: Channel/Spatial/SCC_Attention, SCC_C2fç³»åˆ—")
        success_count += 1
        test_results.append(("SCCæ¨¡å—", True, "å¯¼å…¥æˆåŠŸ"))

    except ImportError as e:
        print(f"   âŒ SCCæ¨¡å—å¯¼å…¥å¤±è´¥: {e}")
        print("   ğŸ’¡ å»ºè®®ï¼šæ£€æŸ¥sccå­æ¨¡å—æ˜¯å¦å®Œæ•´")
        test_results.append(("SCCæ¨¡å—", False, str(e)))

    except Exception as e:
        print(f"   âŒ SCCæ¨¡å—æµ‹è¯•å¼‚å¸¸: {e}")
        test_results.append(("SCCæ¨¡å—", False, str(e)))

    # æµ‹è¯•DCN+SCCç»„åˆæ¨¡å—
    print("\nğŸ”§ æµ‹è¯•DCN+SCCç»„åˆæ¨¡å—:")
    total_tests += 1
    try:
        print("   æ­£åœ¨å¯¼å…¥DCN+SCCç»„åˆæ¨¡å—...")
        from dcn_scc_combined.dcn_scc_attention import DCN_SCC_Conv, DCN_SCC_Bottleneck
        from dcn_scc_combined.dcn_scc_c2f import DCN_SCC_C2f, Enhanced_DCN_SCC_C2f
        print("   âœ… DCN+SCCç»„åˆæ¨¡å—å¯¼å…¥æˆåŠŸ")
        print("   ğŸ“¦ åŒ…å«: DCN_SCC_Conv/Bottleneck, ç»„åˆC2fæ¨¡å—")
        success_count += 1
        test_results.append(("DCN+SCCç»„åˆæ¨¡å—", True, "å¯¼å…¥æˆåŠŸ"))

    except ImportError as e:
        print(f"   âŒ DCN+SCCç»„åˆæ¨¡å—å¯¼å…¥å¤±è´¥: {e}")
        print("   ğŸ’¡ å»ºè®®ï¼šæ£€æŸ¥dcn_scc_combinedå­æ¨¡å—æ˜¯å¦å®Œæ•´")
        test_results.append(("DCN+SCCç»„åˆæ¨¡å—", False, str(e)))

    except Exception as e:
        print(f"   âŒ DCN+SCCç»„åˆæ¨¡å—æµ‹è¯•å¼‚å¸¸: {e}")
        test_results.append(("DCN+SCCç»„åˆæ¨¡å—", False, str(e)))

    # æµ‹è¯•å·¥å…·å‡½æ•°
    print("\nğŸ”§ æµ‹è¯•å·¥å…·å‡½æ•°æ¨¡å—:")
    total_tests += 1
    try:
        print("   æ­£åœ¨æµ‹è¯•å·¥å…·å‡½æ•°...")
        from utils import setup_device, validate_model, benchmark_inference

        # æµ‹è¯•è®¾å¤‡è®¾ç½®
        device = setup_device()
        print(f"   âœ… å·¥å…·å‡½æ•°å·¥ä½œæ­£å¸¸ - æ£€æµ‹åˆ°è®¾å¤‡: {device}")
        print("   ğŸ“¦ åŒ…å«: setup_device, validate_model, benchmark_inference")

        success_count += 1
        test_results.append(("å·¥å…·å‡½æ•°", True, f"è®¾å¤‡: {device}"))

    except ImportError as e:
        print(f"   âŒ å·¥å…·å‡½æ•°å¯¼å…¥å¤±è´¥: {e}")
        print("   ğŸ’¡ å»ºè®®ï¼šæ£€æŸ¥utilsæ¨¡å—æ˜¯å¦å®Œæ•´")
        test_results.append(("å·¥å…·å‡½æ•°", False, str(e)))

    except Exception as e:
        print(f"   âŒ å·¥å…·å‡½æ•°æµ‹è¯•å¼‚å¸¸: {e}")
        test_results.append(("å·¥å…·å‡½æ•°", False, str(e)))

    # è¾“å‡ºæµ‹è¯•æ€»ç»“
    print("\nğŸ“Š æ¨¡å—æµ‹è¯•ç»“æœæ±‡æ€»:")
    print("=" * 50)
    print(f"ğŸ¯ æ€»ä½“ç»“æœ: {success_count}/{total_tests} ä¸ªæ¨¡å—æµ‹è¯•é€šè¿‡")
    print(f"ğŸ“ˆ æˆåŠŸç‡: {success_count/total_tests:.1f}")
    # è¯¦ç»†ç»“æœå±•ç¤º
    for module_name, passed, details in test_results:
        status = "âœ…" if passed else "âŒ"
        print(f"   {status} {module_name}: {details}")

    # æä¾›æµ‹è¯•å»ºè®®
    if success_count == total_tests:
        print("\nğŸ‰ æ­å–œï¼æ‰€æœ‰æ¨¡å—æµ‹è¯•å‡é€šè¿‡")
        print("ğŸš€ é¡¹ç›®å·²å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨")
    else:
        print(f"\nâš ï¸  å‘ç° {total_tests - success_count} ä¸ªæ¨¡å—æµ‹è¯•å¤±è´¥")
        print("ğŸ”§ å»ºè®®æ£€æŸ¥å¤±è´¥çš„æ¨¡å—å¹¶ä¿®å¤ç›¸å…³é—®é¢˜")
        print("ğŸ“– å‚è€ƒé¡¹ç›®æ–‡æ¡£æˆ–æäº¤GitHub Issueè·å–å¸®åŠ©")

    return success_count == total_tests

def show_help():
    """
    æ˜¾ç¤ºè¯¦ç»†çš„å¸®åŠ©ä¿¡æ¯

    æä¾›å®Œæ•´çš„å‘½ä»¤è¡Œä½¿ç”¨æŒ‡å—ï¼Œå¸®åŠ©ç”¨æˆ·äº†è§£æ‰€æœ‰å¯ç”¨åŠŸèƒ½å’Œä½¿ç”¨æ–¹æ³•ã€‚
    åŒ…å«å‚æ•°è¯´æ˜ã€ä½¿ç”¨ç¤ºä¾‹ã€æ³¨æ„äº‹é¡¹ç­‰å…¨é¢ä¿¡æ¯ã€‚
    """
    print("""
ğŸ¯ YOLOv8ä¼˜åŒ–ç¤ºä¾‹é¡¹ç›® - ä¸»è¿è¡Œè„šæœ¬
=====================================

ğŸ“‹ å¯ç”¨å‘½ä»¤å‚æ•°ï¼š
================
ä¼˜åŒ–æ–¹æ³•æ‰§è¡Œï¼š
  --method dcn        : è¿è¡ŒDCNä¼˜åŒ–ç¤ºä¾‹ï¼ˆå‡ ä½•å»ºæ¨¡ï¼‰
  --method scc        : è¿è¡ŒSCCæ³¨æ„åŠ›ä¼˜åŒ–ç¤ºä¾‹ï¼ˆç‰¹å¾å¢å¼ºï¼‰
  --method dcn_scc    : è¿è¡ŒDCN+SCCç»„åˆä¼˜åŒ–ç¤ºä¾‹ï¼ˆåŒé‡ä¼˜åŒ–ï¼‰
  --method all        : ä¾æ¬¡è¿è¡Œæ‰€æœ‰ä¼˜åŒ–æ–¹æ³•ç¤ºä¾‹

å®éªŒåŠŸèƒ½ï¼š
  --ablation          : æ‰§è¡Œæ¶ˆèå®éªŒï¼ˆå¯¹æ¯”åˆ†æå„æ–¹æ³•æ€§èƒ½ï¼‰
  --test              : æµ‹è¯•æ‰€æœ‰æ¨¡å—å®ç°çš„åŠŸèƒ½å®Œæ•´æ€§

å¸®åŠ©ä¿¡æ¯ï¼š
  --help              : æ˜¾ç¤ºæ­¤è¯¦ç»†å¸®åŠ©ä¿¡æ¯

ğŸš€ ä½¿ç”¨ç¤ºä¾‹ï¼š
============
åŸºæœ¬ä½¿ç”¨ï¼š
  python run_all_examples.py --method dcn
  python run_all_examples.py --method scc
  python run_all_examples.py --method dcn_scc

æ‰¹é‡æ‰§è¡Œï¼š
  python run_all_examples.py --method all

é«˜çº§åŠŸèƒ½ï¼š
  python run_all_examples.py --ablation
  python run_all_examples.py --test

ğŸ“ ä½¿ç”¨è¯´æ˜ï¼š
============
â€¢ æ¯ä¸ªç¤ºä¾‹éƒ½ä¼šåˆ›å»ºç›¸åº”çš„ç»“æœç›®å½•
â€¢ è®­ç»ƒæ—¶é—´æ ¹æ®ç¡¬ä»¶é…ç½®è€Œå¼‚ï¼ˆGPUæ¨èï¼‰
â€¢ æŸ¥çœ‹å„ä¸ªç¤ºä¾‹è„šæœ¬äº†è§£å…·ä½“é…ç½®é€‰é¡¹
â€¢ å»ºè®®é¦–æ¬¡ä½¿ç”¨å…ˆè¿è¡Œ--testéªŒè¯ç¯å¢ƒ

ğŸ—‚ï¸ è¾“å‡ºç›®å½•ï¼š
============
â€¢ results_dcn/              : DCNä¼˜åŒ–ç»“æœ
â€¢ results_scc/              : SCCä¼˜åŒ–ç»“æœ
â€¢ results_dcn_scc_combined/ : ç»„åˆä¼˜åŒ–ç»“æœ
â€¢ ablation_results/         : æ¶ˆèå®éªŒç»“æœ

âš ï¸ æ³¨æ„äº‹é¡¹ï¼š
============
â€¢ ç¡®ä¿å·²å®‰è£…PyTorchå’ŒUltralytics
â€¢ GPUç¯å¢ƒå¯æ˜¾è‘—æå‡æ‰§è¡Œé€Ÿåº¦
â€¢ ç¤ºä¾‹ä½¿ç”¨æ¼”ç¤ºå‚æ•°ï¼Œå®é™…åº”ç”¨å¯è°ƒæ•´
â€¢ å¤§æ¨¡å‹è®­ç»ƒéœ€è¦å……è¶³çš„è®¡ç®—èµ„æº

ğŸ”§ æ•…éšœæ’é™¤ï¼š
============
â€¢ å¯¼å…¥é”™è¯¯ï¼šæ£€æŸ¥å„å­æ¨¡å—æ˜¯å¦å®Œæ•´
â€¢ å†…å­˜ä¸è¶³ï¼šå‡å°batch_sizeæˆ–ä½¿ç”¨CPU
â€¢ CUDAé”™è¯¯ï¼šæ£€æŸ¥GPUé©±åŠ¨å’ŒCUDAç‰ˆæœ¬
â€¢ æ—¶é—´è¿‡é•¿ï¼šå¯ä¸­æ–­å¹¶å•ç‹¬è¿è¡Œç¤ºä¾‹

ğŸ“ è·å–å¸®åŠ©ï¼š
============
â€¢ é¡¹ç›®æ–‡æ¡£ï¼šæŸ¥çœ‹README.md
â€¢ é—®é¢˜åé¦ˆï¼šæäº¤GitHub Issue
â€¢ æŠ€æœ¯æ”¯æŒï¼šæŸ¥çœ‹é¡¹ç›®Wiki
""")

def main():
    """
    ä¸»å‡½æ•° - è„šæœ¬å…¥å£ç‚¹

    è§£æå‘½ä»¤è¡Œå‚æ•°å¹¶æ‰§è¡Œç›¸åº”çš„åŠŸèƒ½ï¼Œæ˜¯æ•´ä¸ªè„šæœ¬çš„æ ¸å¿ƒæ§åˆ¶é€»è¾‘ã€‚

    æ‰§è¡Œæµç¨‹ï¼š
    =========
    1. å‚æ•°è§£æï¼šå¤„ç†å‘½ä»¤è¡Œè¾“å…¥
    2. æ¨¡å¼åˆ¤æ–­ï¼šæ ¹æ®å‚æ•°é€‰æ‹©æ‰§è¡Œæ¨¡å¼
    3. åŠŸèƒ½æ‰§è¡Œï¼šè°ƒç”¨ç›¸åº”çš„å¤„ç†å‡½æ•°
    4. ç»“æœå¤„ç†ï¼šè¾“å‡ºæ‰§è¡Œç»“æœå’ŒçŠ¶æ€

    æ”¯æŒçš„æ‰§è¡Œæ¨¡å¼ï¼š
    ===============
    - æµ‹è¯•æ¨¡å¼ (--test): éªŒè¯æ‰€æœ‰æ¨¡å—åŠŸèƒ½
    - æ¶ˆèå®éªŒæ¨¡å¼ (--ablation): å¯¹æ¯”åˆ†æä¼˜åŒ–æ–¹æ³•
    - æ–¹æ³•æ‰§è¡Œæ¨¡å¼ (--method): è¿è¡ŒæŒ‡å®šä¼˜åŒ–ç¤ºä¾‹
    - å¸®åŠ©æ¨¡å¼ (é»˜è®¤): æ˜¾ç¤ºä½¿ç”¨å¸®åŠ©

    å‚æ•°å¤„ç†ï¼š
    =========
    - method: æŒ‡å®šè¦è¿è¡Œçš„ä¼˜åŒ–æ–¹æ³•
    - ablation: å¯ç”¨æ¶ˆèå®éªŒæ¨¡å¼
    - test: å¯ç”¨æ¨¡å—æµ‹è¯•æ¨¡å¼
    - æ— å‚æ•°: æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯

    é”™è¯¯å¤„ç†ï¼š
    =========
    - æ•è·æ‰§è¡Œè¿‡ç¨‹ä¸­çš„å¼‚å¸¸
    - æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯
    - è¿”å›é€‚å½“çš„é€€å‡ºç 

    è¿”å›å€¼ï¼š
    =======
    é€šè¿‡sys.exit()è¿”å›é€€å‡ºç ï¼š
    - 0: æ‰§è¡ŒæˆåŠŸ
    - 1: æ‰§è¡Œå¤±è´¥
    """
    # åˆ›å»ºå‘½ä»¤è¡Œå‚æ•°è§£æå™¨
    parser = argparse.ArgumentParser(
        description='YOLOv8ä¼˜åŒ–ç¤ºä¾‹é¡¹ç›® - ä¸»è¿è¡Œè„šæœ¬',
        formatter_class=argparse.RawDescriptionHelpFormatter,
        epilog="""
ä½¿ç”¨ç¤ºä¾‹:
  python run_all_examples.py --method dcn        # è¿è¡ŒDCNç¤ºä¾‹
  python run_all_examples.py --method all        # è¿è¡Œæ‰€æœ‰ç¤ºä¾‹
  python run_all_examples.py --ablation          # æ¶ˆèå®éªŒ
  python run_all_examples.py --test              # æ¨¡å—æµ‹è¯•
        """
    )

    # å®šä¹‰å‘½ä»¤è¡Œå‚æ•°
    parser.add_argument(
        '--method',
        choices=['dcn', 'scc', 'dcn_scc', 'all'],
        help='æŒ‡å®šè¦è¿è¡Œçš„ä¼˜åŒ–æ–¹æ³• (dcn/scc/dcn_scc/all)'
    )

    parser.add_argument(
        '--ablation',
        action='store_true',
        help='æ‰§è¡Œæ¶ˆèå®éªŒï¼Œå¯¹æ¯”åˆ†æå„ä¼˜åŒ–æ–¹æ³•çš„æ€§èƒ½'
    )

    parser.add_argument(
        '--test',
        action='store_true',
        help='æµ‹è¯•æ‰€æœ‰æ¨¡å—å®ç°çš„åŠŸèƒ½å®Œæ•´æ€§'
    )

    # è§£æå‘½ä»¤è¡Œå‚æ•°
    args = parser.parse_args()

    # æ˜¾ç¤ºç¨‹åºæ ‡é¢˜
    print("ğŸ¯ YOLOv8ä¼˜åŒ–ç¤ºä¾‹é¡¹ç›® - ä¸»è¿è¡Œè„šæœ¬")
    print("=" * 60)
    print("ğŸš€ ç»Ÿä¸€æ¥å£ï¼Œç®€å•æ‰§è¡Œå„ç§ä¼˜åŒ–ç¤ºä¾‹å’Œå®éªŒ")

    # å¤„ç†æµ‹è¯•æ¨¡å¼
    if args.test:
        print("\nğŸ§ª è¿›å…¥æ¨¡å—æµ‹è¯•æ¨¡å¼...")
        success = test_all_modules()
        if success:
            print("\nâœ… æ‰€æœ‰æ¨¡å—æµ‹è¯•é€šè¿‡ï¼")
            sys.exit(0)
        else:
            print("\nâŒ éƒ¨åˆ†æ¨¡å—æµ‹è¯•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ä¸Šè¿°é”™è¯¯ä¿¡æ¯")
            sys.exit(1)

    # å¤„ç†æ¶ˆèå®éªŒæ¨¡å¼
    if args.ablation:
        print("\nğŸ”¬ è¿›å…¥æ¶ˆèå®éªŒæ¨¡å¼...")
        success = run_ablation_study()
        if success:
            print("\nâœ… æ¶ˆèå®éªŒå®Œæˆï¼ç»“æœå·²ä¿å­˜")
            sys.exit(0)
        else:
            print("\nâŒ æ¶ˆèå®éªŒå¤±è´¥ï¼Œè¯·æ£€æŸ¥ä¸Šè¿°é”™è¯¯ä¿¡æ¯")
            sys.exit(1)

    # å¤„ç†æ–¹æ³•æ‰§è¡Œæ¨¡å¼
    if args.method:
        print(f"\nâš™ï¸ è¿›å…¥æ–¹æ³•æ‰§è¡Œæ¨¡å¼: {args.method}")

        # æ ¹æ®æŒ‡å®šæ–¹æ³•æ‰§è¡Œç›¸åº”ç¤ºä¾‹
        if args.method == 'dcn':
            print("ğŸ¯ æ‰§è¡ŒDCNä¼˜åŒ–ç¤ºä¾‹...")
            success = run_dcn_example()

        elif args.method == 'scc':
            print("ğŸ§  æ‰§è¡ŒSCCæ³¨æ„åŠ›ä¼˜åŒ–ç¤ºä¾‹...")
            success = run_scc_example()

        elif args.method == 'dcn_scc':
            print("âš¡ æ‰§è¡ŒDCN+SCCç»„åˆä¼˜åŒ–ç¤ºä¾‹...")
            success = run_dcn_scc_example()

        elif args.method == 'all':
            print("ğŸ”„ æ‰§è¡Œæ‰€æœ‰ä¼˜åŒ–æ–¹æ³•ç¤ºä¾‹...")
            print("\n" + "="*60)
            print("ç¬¬ä¸€é˜¶æ®µï¼šDCNä¼˜åŒ–")
            dcn_success = run_dcn_example()

            print("\n" + "="*60)
            print("ç¬¬äºŒé˜¶æ®µï¼šSCCæ³¨æ„åŠ›ä¼˜åŒ–")
            scc_success = run_scc_example()

            print("\n" + "="*60)
            print("ç¬¬ä¸‰é˜¶æ®µï¼šDCN+SCCç»„åˆä¼˜åŒ–")
            combined_success = run_dcn_scc_example()

            success = dcn_success and scc_success and combined_success

            if success:
                print("\nğŸŠ æ‰€æœ‰ä¼˜åŒ–æ–¹æ³•ç¤ºä¾‹æ‰§è¡ŒæˆåŠŸï¼")
                print("ğŸ“Š ç»“æœæ±‡æ€»ï¼š")
                print("   â€¢ DCNç»“æœ: results_dcn/")
                print("   â€¢ SCCç»“æœ: results_scc/")
                print("   â€¢ ç»„åˆç»“æœ: results_dcn_scc_combined/")
            else:
                print("\nâš ï¸ éƒ¨åˆ†ç¤ºä¾‹æ‰§è¡Œå¤±è´¥ï¼Œè¯·æ£€æŸ¥ä¸Šè¿°è¯¦ç»†æ—¥å¿—")
        else:
            # ç†è®ºä¸Šä¸ä¼šåˆ°è¾¾è¿™é‡Œï¼Œå› ä¸ºchoicesé™åˆ¶äº†è¾“å…¥
            print(f"âŒ æœªçŸ¥æ–¹æ³•: {args.method}")
            success = False

        # è¾“å‡ºæœ€ç»ˆç»“æœ
        if success:
            print("\nğŸ‰ é€‰å®šçš„ç¤ºä¾‹æ‰§è¡ŒæˆåŠŸå®Œæˆï¼")
            print("ğŸ’¡ æç¤ºï¼šæŸ¥çœ‹ç›¸åº”çš„resultsç›®å½•è·å–è¯¦ç»†ç»“æœ")
        else:
            print("\nâŒ ç¤ºä¾‹æ‰§è¡Œå¤±è´¥ï¼Œè¯·æ£€æŸ¥ä¸Šè¿°é”™è¯¯ä¿¡æ¯")
            print("ğŸ”§ å»ºè®®ï¼š")
            print("   â€¢ è¿è¡Œ python run_all_examples.py --test æ£€æŸ¥æ¨¡å—çŠ¶æ€")
            print("   â€¢ æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£è·å–æ•…éšœæ’é™¤æŒ‡å—")
            print("   â€¢ æäº¤GitHub Issueè·å–ç¤¾åŒºå¸®åŠ©")
            sys.exit(1)

    else:
        # æ— å‚æ•°æ—¶æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
        show_help()

if __name__ == "__main__":
    main()
